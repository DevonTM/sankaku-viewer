<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="Sankaku Content Grabber">
    <meta property="og:title" content="Sankaku Viewer">
    <meta property="og:type" content="website">
    {{ if .URL }}
        <meta property="og:url" content="{{ .Loc }}?url={{ .Ori }}">
        <meta property="og:description" content="{{ .Title }} ({{ .Type }})">
        <meta property="og:image:alt" content="{{ .Size }} bytes">
        {{ if eq .Type "image" }}
            <meta property="og:image" content="{{ .Loc }}?id={{ .ID }}&type=url">
            <meta property="og:image:type" content="{{ .Format }}">
            <meta property="og:image:width" content="{{ .Width }}">
            <meta property="og:image:height" content="{{ .Height }}">
            <meta name="twitter:card" content="summary_large_image">
            <meta name="twitter:title" content="Sankaku Viewer">
            <meta name="twitter:site" content="@sankakucomplex">
            {{ if le .Size 5242880 }}
                <meta name="twitter:description" content="{{ .Title }} ({{ .Type }})">
                <meta name="twitter:image" content="{{ .Loc }}?id={{ .ID }}&type=url">
            {{ else }}
                <meta name="twitter:description" content="{{ .Title }} (compressed {{ .Type }})">
                <meta name="twitter:image" content="{{ .Loc }}?id={{ .ID }}&type=surl">
            {{ end }}
            <meta name="twitter:image:alt" content="{{ .Size }} bytes">
        {{ else if eq .Type "video" }}
            <meta property="og:image" content="{{ .Loc }}?id={{ .ID }}&type=purl">
            <meta property="og:video" content="{{ .Loc }}?id={{ .ID }}&type=url">
            <meta property="og:video:type" content="{{ .Format }}">
            <meta property="og:video:width" content="{{ .Width }}">
            <meta property="og:video:height" content="{{ .Height }}">
            <script src="https://cdn.fluidplayer.com/v3/current/fluidplayer.min.js"></script>
        {{ end }}
        <title>{{ .Title }}</title>
    {{ else }}
        <meta property="og:url" content="{{ .Loc }}">
        <meta property="og:description" content="Sankaku Content Grabber">
        <meta property="og:image:alt" content="27522 bytes">
        <meta property="og:image" content="{{ .Loc }}logo.png">
        <title>Sankaku Viewer</title>
    {{ end }}
</head>
<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
    }
    h2 {
        text-align: center;
    }
    form {
        text-align: center;
    }
    input[type=text] {
        width: 50%;
        padding: 12px 20px;
        margin: 8px 0;
        box-sizing: border-box;
    }
    input[type=submit] {
        background-color: #4CAF50;
        color: white;
        border: none;
        font-size: 16px;
        width: 10%;
        padding: 12px 20px;
        margin: 8px 0;
        cursor: pointer;
    }
    input[type=submit]:hover {
        background-color: #45a049;
    }
    @media screen and (max-width: 600px) {
        input[type=submit] {
            width: 20%;
        }
    }
    p,a {
        text-align: center;
    }
    a {
        display: block;
    }
    .container {
        padding-inline: 4%;
    }
</style>
<body>
    <h2>Sankaku Viewer</h2>
    <form action="" method="get">
        <label for="input">Sankaku URL:</label>
        <input type="text" name="url" id="input" placeholder="https://sankaku.app/post/show/id">
        <input type="submit" id="submit" value="GET">
    </form>
    {{ if .Error }}
        <p>{{ .Error }}</p>
    {{ else if .URL }}
        <a href="{{ .URL }}" style="padding-bottom: 1%;" download><b>download</b></a>
        {{ if eq .Type "image" }}
            <div class="container">
                <img src="{{ .URL }}" alt="{{ .Format }}" style="width: 100%;">
            </div>
        {{ else if eq .Type "video" }}
            <div class="container">
                <video id="video-id"><source src="{{ .URL }}" type="{{ .Format }}" />
            </div>
            <script>
                var myFP = fluidPlayer(
                    'video-id', {
                        "layoutControls": {
                            "controlBar": {
                                "autoHideTimeout": 3,
                                "animated": true,
                                "autoHide": true
                            },
                            "htmlOnPauseBlock": {
                                "html": null,
                                "height": null,
                                "width": null
                            },
                            "autoPlay": false,
                            "mute": false,
                            "allowTheatre": true,
                            "playPauseAnimation": true,
                            "playbackRateEnabled": false,
                            "allowDownload": false,
                            "playButtonShowing": true,
                            "fillToContainer": true,
                            "posterImage": "{{ .Poster }}"
                        },
                        "vastOptions": {
                            "adList": [],
                            "adCTAText": false,
                            "adCTATextPosition": ""
                        }
                    }
                );
            </script>
        {{ end }}
        <a href="{{ .Ori }}"><b>source</b></a>
    {{ end }}
</body>
</html>
